{"version":3,"sources":["webpack:///components/app.min.js","webpack:///./components/app.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","compose","middlewares","_this3","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","return","_ref3","regeneratorRuntime","mark","_callee4","context","index","dispatch","_ref4","_callee3","i","wrap","_context3","prev","Error","length","abrupt","sent","stop","_x3","_context4","_x","_x2","defineProperty","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","_src","_src2","App","_xin$Component","getPrototypeOf","evt","console","detail","title","document","put","__appSignature","location","window","history","handlers","__started","hashSeparator","reHashSeparator","RegExp","manual","async","start","pattern","match","str","chunks","split","tokens","re","replace","g","token","push","optRe","slice","route","callback","routeHandler","type","args","__isStatic","result","__routeRegExp","_ref","_callee","executed","_context","__middlewareChainRun","__execute","is","__id","__listenNavigation","fire","_this2","__executeCallback","mode","event","on","defaultPrevented","nodeName","preventDefault","state","url","getAttribute","pushState","innerHTML","href","fragment","getFragment","reduce","executors","handler","forEach","name","_ref2","_callee2","_context2","getFragmentExecutors","uri","executor","path","options","rootUri","toString","origin","middleware","decodeURI","pathname","search","get","docTitle","String","observer","Boolean","route-not-found","Component","define"],"mappings":"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","file":"components/app.min.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _src = __webpack_require__(1);\n\t\n\tvar _src2 = _interopRequireDefault(_src);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar App = function (_xin$Component) {\n\t  _inherits(App, _xin$Component);\n\t\n\t  function App() {\n\t    _classCallCheck(this, App);\n\t\n\t    return _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: 'handleRouteNotFound',\n\t    value: function handleRouteNotFound(evt) {\n\t      console.error('Route not found: ' + evt.detail);\n\t    }\n\t  }, {\n\t    key: '_titleChanged',\n\t    value: function _titleChanged(title) {\n\t      document.title = title;\n\t    }\n\t  }, {\n\t    key: 'created',\n\t    value: function created() {\n\t      _src2.default.put('app', this);\n\t\n\t      // this.classList.add('xin-app');\n\t\n\t      this.__appSignature = true;\n\t      this.location = window.location;\n\t      this.history = window.history;\n\t\n\t      // default values\n\t      this.handlers = [];\n\t      this.middlewares = [];\n\t\n\t      this.__started = false;\n\t    }\n\t  }, {\n\t    key: '_hashSeparatorChanged',\n\t    value: function _hashSeparatorChanged(hashSeparator) {\n\t      this.reHashSeparator = new RegExp(hashSeparator + '(.*)$');\n\t    }\n\t  }, {\n\t    key: 'attached',\n\t    value: function attached() {\n\t      if (!this.manual) {\n\t        this.async(this.start);\n\t      }\n\t    }\n\t  }, {\n\t    key: '__isStatic',\n\t    value: function __isStatic(pattern) {\n\t      return !pattern.match(/[[{]/);\n\t    }\n\t  }, {\n\t    key: '__routeRegExp',\n\t    value: function __routeRegExp(str) {\n\t      var chunks = str.split('[');\n\t\n\t      if (chunks.length > 2) {\n\t        throw new Error('Invalid use of optional params');\n\t      }\n\t\n\t      var tokens = [];\n\t      var re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n\t        tokens.push(token);\n\t        return '([^/]+)';\n\t      }).replace(/\\//g, '\\\\/');\n\t\n\t      var optRe = '';\n\t\n\t      if (chunks[1]) {\n\t        optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n\t          tokens.push(token);\n\t          return '([^/]+)';\n\t        }).replace(/\\//g, '\\\\/') + ')?';\n\t      }\n\t      return [new RegExp('^' + re + optRe + '$'), tokens];\n\t    }\n\t  }, {\n\t    key: 'route',\n\t    value: function route(_route, callback) {\n\t      var routeHandler = {\n\t        route: _route,\n\t        type: 's',\n\t        pattern: null,\n\t        args: [],\n\t        callback: callback\n\t      };\n\t\n\t      if (!this.__isStatic(_route)) {\n\t        var result = this.__routeRegExp(_route);\n\t\n\t        routeHandler.type = 'v';\n\t        routeHandler.pattern = result[0];\n\t        routeHandler.args = result[1];\n\t      }\n\t\n\t      this.handlers.push(routeHandler);\n\t    }\n\t  }, {\n\t    key: 'start',\n\t    value: function () {\n\t      var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n\t        var executed;\n\t        return regeneratorRuntime.wrap(function _callee$(_context) {\n\t          while (1) {\n\t            switch (_context.prev = _context.next) {\n\t              case 0:\n\t                if (!this.__started) {\n\t                  _context.next = 2;\n\t                  break;\n\t                }\n\t\n\t                return _context.abrupt('return');\n\t\n\t              case 2:\n\t\n\t                this.__middlewareChainRun = compose(this.middlewares);\n\t\n\t                // this.__starting = true;\n\t                _context.next = 5;\n\t                return this.__execute();\n\t\n\t              case 5:\n\t                executed = _context.sent;\n\t\n\t                // this.__starting = false;\n\t\n\t                if (executed) {\n\t                  console.info('Started ' + this.is + ':' + this.__id);\n\t\n\t                  this.__started = true;\n\t\n\t                  this.__listenNavigation();\n\t\n\t                  this.fire('started');\n\t                }\n\t\n\t              case 7:\n\t              case 'end':\n\t                return _context.stop();\n\t            }\n\t          }\n\t        }, _callee, this);\n\t      }));\n\t\n\t      function start() {\n\t        return _ref.apply(this, arguments);\n\t      }\n\t\n\t      return start;\n\t    }()\n\t  }, {\n\t    key: '__listenNavigation',\n\t    value: function __listenNavigation() {\n\t      var _this2 = this;\n\t\n\t      var callback = this.__executeCallback = function () {\n\t        _this2.__execute();\n\t      };\n\t\n\t      if (this.mode === 'history') {\n\t        _src2.default.event(window).on('popstate', callback);\n\t        _src2.default.event(document).on('click', function (evt) {\n\t          if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n\t            evt.preventDefault();\n\t\n\t            var state = { url: evt.target.getAttribute('href') };\n\t            _this2.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\t\n\t            callback();\n\t          }\n\t        });\n\t      } else {\n\t        _src2.default.event(window).on('hashchange', callback);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getFragmentExecutors',\n\t    value: function getFragmentExecutors(fragment) {\n\t      fragment = fragment || this.getFragment();\n\t\n\t      return this.handlers.reduce(function (executors, handler) {\n\t        if (handler.type === 's') {\n\t          if (fragment === handler.route) {\n\t            executors.push({ handler: handler, args: {} });\n\t          }\n\t        } else if (handler.type === 'v') {\n\t          (function () {\n\t            var result = fragment.match(handler.pattern);\n\t            if (result) {\n\t              (function () {\n\t                var args = {};\n\t\n\t                handler.args.forEach(function (name, index) {\n\t                  args[name] = result[index + 1];\n\t                });\n\t\n\t                executors.push({\n\t                  handler: handler,\n\t                  args: args\n\t                });\n\t              })();\n\t            }\n\t          })();\n\t        }\n\t        return executors;\n\t      }, []);\n\t    }\n\t  }, {\n\t    key: '__execute',\n\t    value: function () {\n\t      var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n\t        var fragment, executors, context;\n\t        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n\t          while (1) {\n\t            switch (_context2.prev = _context2.next) {\n\t              case 0:\n\t                fragment = this.getFragment();\n\t                executors = this.getFragmentExecutors(fragment);\n\t\n\t                if (!(executors.length === 0)) {\n\t                  _context2.next = 5;\n\t                  break;\n\t                }\n\t\n\t                this.fire('route-not-found', fragment);\n\t                return _context2.abrupt('return', false);\n\t\n\t              case 5:\n\t                context = { uri: fragment };\n\t\n\t\n\t                this.fire('navigated', context);\n\t\n\t                // run middleware chain then execute all executors\n\t                _context2.next = 9;\n\t                return this.__middlewareChainRun(context, function () {\n\t                  executors.forEach(function (executor) {\n\t                    return executor.handler.callback(executor.args, context);\n\t                  });\n\t                });\n\t\n\t              case 9:\n\t                return _context2.abrupt('return', true);\n\t\n\t              case 10:\n\t              case 'end':\n\t                return _context2.stop();\n\t            }\n\t          }\n\t        }, _callee2, this);\n\t      }));\n\t\n\t      function __execute() {\n\t        return _ref2.apply(this, arguments);\n\t      }\n\t\n\t      return __execute;\n\t    }()\n\t  }, {\n\t    key: 'navigate',\n\t    value: function navigate(path, options) {\n\t      path = path || '/';\n\t      options = options || {};\n\t\n\t      if (this.mode === 'history') {\n\t        var url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n\t        if (this.location.href.replace(this.location.origin, '') !== url) {\n\t          this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\t          this.__execute();\n\t        }\n\t      } else {\n\t        this.location.href.match(this.reHashSeparator);\n\t        this.location.href = this.location.href.replace(this.reHashSeparator, '') + this.hashSeparator + path;\n\t      }\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'use',\n\t    value: function use(middleware) {\n\t      this.middlewares.push(middleware);\n\t    }\n\t  }, {\n\t    key: 'getFragment',\n\t    value: function getFragment() {\n\t      var fragment = void 0;\n\t      if (this.mode === 'history') {\n\t        fragment = decodeURI(this.location.pathname + this.location.search);\n\t        fragment = fragment.replace(/\\?(.*)$/, '');\n\t        fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n\t      } else {\n\t        var match = this.location.href.match(this.reHashSeparator);\n\t        fragment = match ? match[1] : '';\n\t      }\n\t\n\t      return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n\t    }\n\t\n\t    // $back (evt) {\n\t    //   evt.preventDefault();\n\t    //   this.history.back();\n\t    // }\n\t\n\t  }, {\n\t    key: 'props',\n\t    get: function get() {\n\t      return {\n\t        docTitle: {\n\t          type: String,\n\t          value: 'Application',\n\t          observer: '_titleChanged'\n\t        },\n\t\n\t        manual: {\n\t          type: Boolean\n\t        },\n\t\n\t        mode: {\n\t          type: String,\n\t          value: 'hash'\n\t        },\n\t\n\t        rootUri: {\n\t          type: String,\n\t          value: '/'\n\t        },\n\t\n\t        hashSeparator: {\n\t          type: String,\n\t          value: '#!',\n\t          observer: '_hashSeparatorChanged'\n\t        }\n\t      };\n\t    }\n\t  }, {\n\t    key: 'listeners',\n\t    get: function get() {\n\t      return {\n\t        'route-not-found': 'handleRouteNotFound(evt)'\n\t      };\n\t    }\n\t  }, {\n\t    key: 'started',\n\t    get: function get() {\n\t      return this.__started || false;\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}(_src2.default.Component);\n\t\n\t_src2.default.define('xin-app', App);\n\t\n\tfunction compose(middlewares) {\n\t  var _this3 = this;\n\t\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\t\n\t  try {\n\t    for (var _iterator = middlewares[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var fn = _step.value;\n\t\n\t      if (typeof fn !== 'function') {\n\t        throw new TypeError('Middleware must be composed of functions!');\n\t      }\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\t\n\t  return function () {\n\t    var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee4(context, next) {\n\t      var dispatch = function () {\n\t        var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(i) {\n\t          var fn;\n\t          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n\t            while (1) {\n\t              switch (_context3.prev = _context3.next) {\n\t                case 0:\n\t                  if (!(i <= index)) {\n\t                    _context3.next = 2;\n\t                    break;\n\t                  }\n\t\n\t                  throw new Error('next() called multiple times');\n\t\n\t                case 2:\n\t\n\t                  index = i;\n\t                  fn = middlewares[i];\n\t\n\t                  if (i === middlewares.length) {\n\t                    fn = next;\n\t                  }\n\t\n\t                  if (fn) {\n\t                    _context3.next = 7;\n\t                    break;\n\t                  }\n\t\n\t                  return _context3.abrupt('return');\n\t\n\t                case 7:\n\t                  _context3.next = 9;\n\t                  return fn(context, function () {\n\t                    return dispatch(i + 1);\n\t                  });\n\t\n\t                case 9:\n\t                  return _context3.abrupt('return', _context3.sent);\n\t\n\t                case 10:\n\t                case 'end':\n\t                  return _context3.stop();\n\t              }\n\t            }\n\t          }, _callee3, this);\n\t        }));\n\t\n\t        return function dispatch(_x3) {\n\t          return _ref4.apply(this, arguments);\n\t        };\n\t      }();\n\t\n\t      var index;\n\t      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n\t        while (1) {\n\t          switch (_context4.prev = _context4.next) {\n\t            case 0:\n\t              // last called middlewares #\n\t              index = -1;\n\t              return _context4.abrupt('return', dispatch(0));\n\t\n\t            case 2:\n\t            case 'end':\n\t              return _context4.stop();\n\t          }\n\t        }\n\t      }, _callee4, _this3);\n\t    }));\n\t\n\t    return function (_x, _x2) {\n\t      return _ref3.apply(this, arguments);\n\t    };\n\t  }();\n\t}\n\t\n\t_src2.default.App = App;\n\t\n\texports.default = App;\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// components/app.min.js","import xin from '../src';\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      docTitle: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      manual: {\n        type: Boolean,\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hashSeparator: {\n        type: String,\n        value: '#!',\n        observer: '_hashSeparatorChanged',\n      },\n    };\n  }\n\n  get listeners () {\n    return {\n      'route-not-found': 'handleRouteNotFound(evt)',\n    };\n  }\n\n  handleRouteNotFound (evt) {\n    console.error('Route not found: ' + evt.detail);\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    xin.put('app', this);\n\n    // this.classList.add('xin-app');\n\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    this.__started = false;\n  }\n\n  _hashSeparatorChanged (hashSeparator) {\n    this.reHashSeparator = new RegExp(hashSeparator + '(.*)$');\n  }\n\n  attached () {\n    if (!this.manual) {\n      this.async(this.start);\n    }\n  }\n\n  __isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  __routeRegExp (str) {\n    let chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    let tokens = [];\n    let re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    let optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [ new RegExp('^' + re + optRe + '$'), tokens ];\n  }\n\n  route (route, callback) {\n    let routeHandler = {\n      route: route,\n      type: 's',\n      pattern: null,\n      args: [],\n      callback: callback,\n    };\n\n    if (!this.__isStatic(route)) {\n      let result = this.__routeRegExp(route);\n\n      routeHandler.type = 'v';\n      routeHandler.pattern = result[0];\n      routeHandler.args = result[1];\n    }\n\n    this.handlers.push(routeHandler);\n  }\n\n  async start () {\n    if (this.__started) {\n      return;\n    }\n\n    this.__middlewareChainRun = compose(this.middlewares);\n\n    // this.__starting = true;\n    let executed = await this.__execute();\n    // this.__starting = false;\n\n    if (executed) {\n      console.info(`Started ${this.is}:${this.__id}`);\n\n      this.__started = true;\n\n      this.__listenNavigation();\n\n      this.fire('started');\n    }\n  }\n\n  __listenNavigation () {\n    let callback = this.__executeCallback = () => {\n      this.__execute();\n    };\n\n    if (this.mode === 'history') {\n      xin.event(window).on('popstate', callback);\n      xin.event(document).on('click', evt => {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n\n          let state = { url: evt.target.getAttribute('href') };\n          this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\n          callback();\n        }\n      });\n    } else {\n      xin.event(window).on('hashchange', callback);\n    }\n  }\n\n  get started () {\n    return this.__started || false;\n  }\n\n  getFragmentExecutors (fragment) {\n    fragment = fragment || this.getFragment();\n\n    return this.handlers.reduce((executors, handler) => {\n      if (handler.type === 's') {\n        if (fragment === handler.route) {\n          executors.push({ handler: handler, args: {} });\n        }\n      } else if (handler.type === 'v') {\n        let result = fragment.match(handler.pattern);\n        if (result) {\n          let args = {};\n\n          handler.args.forEach(function (name, index) {\n            args[name] = result[index + 1];\n          });\n\n          executors.push({\n            handler: handler,\n            args: args,\n          });\n        }\n      }\n      return executors;\n    }, []);\n  }\n\n  async __execute () {\n    let fragment = this.getFragment();\n\n    let executors = this.getFragmentExecutors(fragment);\n    if (executors.length === 0) {\n      this.fire('route-not-found', fragment);\n      return false;\n    }\n\n    let context = { uri: fragment };\n\n    this.fire('navigated', context);\n\n    // run middleware chain then execute all executors\n    await this.__middlewareChainRun(context, () => {\n      executors.forEach(executor => executor.handler.callback(executor.args, context));\n    });\n\n    return true;\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      let url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.__execute();\n      }\n    } else {\n      this.location.href.match(this.reHashSeparator);\n      this.location.href = this.location.href.replace(this.reHashSeparator, '') + this.hashSeparator + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  getFragment () {\n    let fragment;\n    if (this.mode === 'history') {\n      fragment = decodeURI(this.location.pathname + this.location.search);\n      fragment = fragment.replace(/\\?(.*)$/, '');\n      fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n    } else {\n      let match = this.location.href.match(this.reHashSeparator);\n      fragment = match ? match[1] : '';\n    }\n\n    return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n  }\n\n  // $back (evt) {\n  //   evt.preventDefault();\n  //   this.history.back();\n  // }\n}\n\nxin.define('xin-app', App);\n\nfunction compose (middlewares) {\n  for (const fn of middlewares) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('Middleware must be composed of functions!');\n    }\n  }\n\n  return async (context, next) => {\n    // last called middlewares #\n    let index = -1;\n\n    async function dispatch (i) {\n      if (i <= index) {\n        throw new Error('next() called multiple times');\n      }\n\n      index = i;\n      let fn = middlewares[i];\n      if (i === middlewares.length) {\n        fn = next;\n      }\n      if (!fn) {\n        return;\n      }\n\n      return await fn(context, () => dispatch(i + 1));\n    }\n\n    return dispatch(0);\n  };\n}\n\nxin.App = App;\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./components/app.js"],"sourceRoot":""}