{"version":3,"sources":["webpack:///./event.js","webpack:///./components/lib/route.js","webpack:////Users/jafar/Workspaces/js/event-helper/index.js","webpack:///./components/app.js"],"names":["Route","str","chunks","split","length","Error","tokens","re","replace","g","token","push","optRe","slice","RegExp","pattern","match","route","callback","isStatic","type","args","result","routeRegExp","fragment","handler","reduce","name","index","App","console","warn","title","document","put","__appSignature","location","window","history","handlers","middlewares","__started","__starting","manual","async","start","__middlewareChainRun","compose","__listenNavigation","info","is","__id","__execute","executed","fire","mode","on","evt","defaultPrevented","target","nodeName","preventDefault","state","url","getAttribute","pushState","innerHTML","href","executors","executor","getExecutorFor","getFragment","context","app","uri","getFragmentExecutors","notFound","forEach","willContinue","path","options","rootUri","toString","origin","hash","middleware","decodeURI","pathname","search","hashRegexp","err","error","docTitle","String","value","observer","Boolean","_hashRegexp","_hash","Component","define","fn","TypeError","next","i","dispatch"],"mappings":"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ACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,qDAAqD;AACtE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,aAAa,aAAa;AAC1B;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,kCAAkC,GAAG;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,aAAa,mBAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAC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","file":"components/app.js","sourcesContent":["export { default } from 'event-helper';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./event.js\n// module id = 13\n// module chunks = 2","class Route {\n  static routeRegExp (str) {\n    let chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    let tokens = [];\n    let re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    let optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [ new RegExp('^' + re + optRe + '$'), tokens ];\n  }\n\n  static isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  constructor (route, callback) {\n    this.route = route;\n    this.callback = callback;\n\n    if (Route.isStatic(route)) {\n      this.type = 's';\n      this.pattern = null;\n      this.args = [];\n    } else {\n      let result = Route.routeRegExp(route);\n      this.type = 'v';\n      this.pattern = result[0];\n      this.args = result[1];\n    }\n  }\n\n  getExecutorFor (fragment) {\n    if (this.type === 's') {\n      if (fragment === this.route) {\n        return { handler: this, args: {} };\n      }\n    } else if (this.type === 'v') {\n      let result = fragment.match(this.pattern);\n      if (result) {\n        return {\n          handler: this,\n          args: this.args.reduce((args, name, index) => {\n            args[name] = result[index + 1];\n            return args;\n          }, {}),\n        };\n      }\n    }\n  }\n}\n\nexport default Route;\n\n\n\n// WEBPACK FOOTER //\n// ./components/lib/route.js","let _matcher;\nlet _level = 0;\nlet _id = 0;\nlet _handlers = {};\nlet _delegatorInstances = {};\n\nfunction _addEvent (delegator, type, callback) {\n    // blur and focus do not bubble up but if you use event capturing\n    // then you will get them\n  let useCapture = type === 'blur' || type === 'focus';\n  delegator.element.addEventListener(type, callback, useCapture);\n}\n\nfunction _cancel (evt) {\n  evt.preventDefault();\n  evt.stopPropagation();\n}\n\n/**\n * returns function to use for determining if an element\n * matches a query selector\n *\n * @returns {Function}\n */\nfunction _getMatcher (element) {\n  if (_matcher) {\n    return _matcher;\n  }\n\n  if (element.matches) {\n    _matcher = element.matches;\n    return _matcher;\n  }\n\n  if (element.webkitMatchesSelector) {\n    _matcher = element.webkitMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.mozMatchesSelector) {\n    _matcher = element.mozMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.msMatchesSelector) {\n    _matcher = element.msMatchesSelector;\n    return _matcher;\n  }\n\n  if (element.oMatchesSelector) {\n    _matcher = element.oMatchesSelector;\n    return _matcher;\n  }\n\n    // if it doesn't match a native browser method\n    // fall back to the delegator function\n  _matcher = Delegator.matchesSelector;\n  return _matcher;\n}\n\n/**\n * determines if the specified element matches a given selector\n *\n * @param {Node} element - the element to compare against the selector\n * @param {string} selector\n * @param {Node} boundElement - the element the listener was attached to\n * @returns {void|Node}\n */\nfunction _matchesSelector (element, selector, boundElement) {\n    // no selector means this event was bound directly to this element\n  if (selector === '_root') {\n    return boundElement;\n  }\n\n    // if we have moved up to the element you bound the event to\n    // then we have come too far\n  if (element === boundElement) {\n    return;\n  }\n\n    // if this is a match then we are done!\n  if (_getMatcher(element).call(element, selector)) {\n    return element;\n  }\n\n    // if this element did not match but has a parent we should try\n    // going up the tree to see if any of the parent elements match\n    // for example if you are looking for a click on an <a> tag but there\n    // is a <span> inside of the a tag that it is the target,\n    // it should still work\n  if (element.parentNode) {\n    _level++;\n    return _matchesSelector(element.parentNode, selector, boundElement);\n  }\n}\n\nfunction _addHandler (delegator, event, selector, callback) {\n  if (!_handlers[delegator.id]) {\n    _handlers[delegator.id] = {};\n  }\n\n  if (!_handlers[delegator.id][event]) {\n    _handlers[delegator.id][event] = {};\n  }\n\n  if (!_handlers[delegator.id][event][selector]) {\n    _handlers[delegator.id][event][selector] = [];\n  }\n\n  _handlers[delegator.id][event][selector].push(callback);\n}\n\nfunction _removeHandler (delegator, event, selector, callback) {\n    // if there are no events tied to this element at all\n    // then don't do anything\n  if (!_handlers[delegator.id]) {\n    return;\n  }\n\n    // if there is no event type specified then remove all events\n    // example: Delegator(element).off()\n  if (!event) {\n    for (let type in _handlers[delegator.id]) {\n      if (_handlers[delegator.id].hasOwnProperty(type)) {\n        _handlers[delegator.id][type] = {};\n      }\n    }\n    return;\n  }\n\n    // if no callback or selector is specified remove all events of this type\n    // example: Delegator(element).off('click')\n  if (!callback && !selector) {\n    _handlers[delegator.id][event] = {};\n    return;\n  }\n\n    // if a selector is specified but no callback remove all events\n    // for this selector\n    // example: Delegator(element).off('click', '.sub-element')\n  if (!callback) {\n    delete _handlers[delegator.id][event][selector];\n    return;\n  }\n\n    // if we have specified an event type, selector, and callback then we\n    // need to make sure there are callbacks tied to this selector to\n    // begin with.  if there aren't then we can stop here\n  if (!_handlers[delegator.id][event][selector]) {\n    return;\n  }\n\n    // if there are then loop through all the callbacks and if we find\n    // one that matches remove it from the array\n  for (let i = 0; i < _handlers[delegator.id][event][selector].length; i++) {\n    if (_handlers[delegator.id][event][selector][i] === callback) {\n      _handlers[delegator.id][event][selector].splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction _handleEvent (id, e, type) {\n  if (!_handlers[id][type]) {\n    return;\n  }\n\n  let target = e.target || e.srcElement;\n  let selector;\n  let match;\n  let matches = {};\n  let i = 0;\n  let j = 0;\n\n    // find all events that match\n  _level = 0;\n  for (selector in _handlers[id][type]) {\n    if (_handlers[id][type].hasOwnProperty(selector)) {\n      match = _matchesSelector(target, selector, _delegatorInstances[id].element);\n\n      if (match && Delegator.matchesEvent(type, _delegatorInstances[id].element, match, selector === '_root', e)) {\n        _level++;\n        _handlers[id][type][selector].match = match;\n        matches[_level] = _handlers[id][type][selector];\n      }\n    }\n  }\n\n    // stopPropagation() fails to set cancelBubble to true in Webkit\n    // @see http://code.google.com/p/chromium/issues/detail?id=162270\n  e.stopPropagation = function () {\n    e.cancelBubble = true;\n  };\n\n  for (i = 0; i <= _level; i++) {\n    if (matches[i]) {\n      for (j = 0; j < matches[i].length; j++) {\n        if (matches[i][j].call(matches[i].match, e) === false) {\n          Delegator.cancel(e);\n          return;\n        }\n\n        if (e.cancelBubble) {\n          return;\n        }\n      }\n    }\n  }\n}\n\nlet id = 0;\nfunction nextId () {\n  return id++;\n}\n\nconst aliases = new Map();\nconst aliasesDefaultTranslator = name => ([ name ]);\nconst aliasesTranslators = {\n  transitionend (name) {\n    let el = document.createElement('fakeelement');\n    let transitions = {\n      'OTransition': 'oTransitionEnd',\n      'MozTransition': 'transitionend',\n      'WebkitTransition': 'webkitTransitionEnd',\n      'transition': 'transitionend',\n    };\n\n    for (let t in transitions) {\n      if (el.style[t] !== undefined) {\n        return [transitions[t]];\n      }\n    }\n  },\n};\n\nfunction _aliases (name) {\n  let theAliases;\n  if (aliases.has(name)) {\n    theAliases = aliases.get(name);\n  } else {\n    let translator = aliasesTranslators[name] || aliasesDefaultTranslator;\n    theAliases = translator(name);\n    aliases.set(name, theAliases);\n  }\n\n  return theAliases;\n}\n\n/**\n * binds the specified events to the element\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @param {boolean=} remove\n * @returns {Object}\n */\nfunction _bind (events, selector, callback, remove) {\n    // fail silently if you pass null or undefined as an alement\n    // in the Delegator constructor\n  if (!this.element) {\n    return;\n  }\n\n  if (!(events instanceof Array)) {\n    events = [events];\n  }\n\n  if (!callback && typeof (selector) === 'function') {\n    callback = selector;\n    selector = '_root';\n  }\n\n  if (selector instanceof window.HTMLElement) {\n    let id;\n    if (selector.hasAttribute('bind-event-id')) {\n      id = selector.getAttribute('bind-event-id');\n    } else {\n      id = nextId();\n      selector.setAttribute('bind-event-id', id);\n    }\n    selector = `[bind-event-id=\"${id}\"]`;\n  }\n\n  let id = this.id;\n  let i;\n\n  function _getGlobalCallback (type) {\n    return function (e) {\n      _handleEvent(id, e, type);\n    };\n  }\n\n  for (i = 0; i < events.length; i++) {\n    _aliases(events[i]).forEach(alias => {\n      // console.info('> ' + events[i] + ':' + alias);\n      if (remove) {\n        _removeHandler(this, alias, selector, callback);\n        return;\n      }\n\n      if (!_handlers[id] || !_handlers[id][alias]) {\n        Delegator.addEvent(this, alias, _getGlobalCallback(alias));\n      }\n\n      _addHandler(this, alias, selector, callback);\n    });\n  }\n\n  return this;\n}\n\n/**\n * Delegator object constructor\n *\n * @param {Node} element\n */\nfunction Delegator (element, id) {\n  this.element = element;\n  this.id = id;\n}\n\n/**\n * adds an event\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @returns {Object}\n */\nDelegator.prototype.on = function (events, selector, callback) {\n  return _bind.call(this, events, selector, callback);\n};\n\n/**\n * removes an event\n *\n * @param {string|Array} events\n * @param {string} selector\n * @param {Function} callback\n * @returns {Object}\n */\nDelegator.prototype.off = function (events, selector, callback) {\n  return _bind.call(this, events, selector, callback, true);\n};\n\nDelegator.prototype.once = function (events, selector, callback) {\n  if (!callback && typeof (selector) === 'function') {\n    callback = selector;\n    selector = '_root';\n  }\n\n  const proxyCallback = (...args) => {\n    this.off(events, selector, proxyCallback);\n    return callback(...args);\n  };\n\n  return this.on(events, selector, proxyCallback);\n};\n\nDelegator.prototype.fire = function (type, detail, options) {\n  options = options || {};\n  detail = detail || {};\n\n  let evt;\n  let bubbles = options.bubbles === undefined ? true : options.bubbles;\n  let cancelable = Boolean(options.cancelable);\n\n  switch (type) {\n    case 'click':\n      evt = new window.Event(type, {\n        bubbles: bubbles,\n        cancelable: cancelable,\n      });\n\n      // XXX check if without this works on every browsers\n      // evt = document.createEvent('HTMLEvents');\n      // evt.initEvent(type, true, false);\n      break;\n    default:\n      evt = new window.CustomEvent(type, {\n        bubbles: Boolean(bubbles),\n        cancelable: cancelable,\n        detail: detail,\n      });\n      break;\n  }\n\n  this.element.dispatchEvent(evt);\n\n  return evt;\n};\n\nDelegator.matchesSelector = function () {};\nDelegator.cancel = _cancel;\nDelegator.addEvent = _addEvent;\nDelegator.aliases = _aliases;\nDelegator.matchesEvent = function () {\n  return true;\n};\n\nfunction eventHelper (element) {\n  // only keep one Delegator instance per node to make sure that\n  // we don't create a ton of new objects if you want to delegate\n  // multiple events from the same node\n  //\n  // for example: eventHelper(document).on(...\n  for (let key in _delegatorInstances) {\n    if (_delegatorInstances[key].element === element) {\n      return _delegatorInstances[key];\n    }\n  }\n\n  _id++;\n  _delegatorInstances[_id] = new Delegator(element, _id);\n\n  return _delegatorInstances[_id];\n}\n\nexport default eventHelper;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /Users/jafar/Workspaces/js/event-helper/index.js\n// module id = 17\n// module chunks = 2","import xin from '../';\nimport event from '../event';\n\nimport Route from './lib/route';\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      docTitle: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      manual: {\n        type: Boolean,\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hash: {\n        type: String,\n        value: '#!',\n      },\n    };\n  }\n\n  get hashRegexp () {\n    if (!this._hashRegexp || this._hash !== this.hash) {\n      this._hashRegexp = new RegExp(`${this.hash}(.*)$`);\n      this._hash = this.hash;\n    }\n\n    return this._hashRegexp;\n  }\n\n  notFound (fragment) {\n    console.warn(`Route not found: ${fragment}`);\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    xin.put('app', this);\n\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    this.__started = false;\n    this.__starting = false;\n  }\n\n  attached () {\n    if (!this.manual) {\n      this.async(() => {\n        this.start();\n      });\n    }\n  }\n\n  route (route, callback) {\n    this.handlers.push(new Route(route, callback));\n  }\n\n  async start () {\n    if (this.__started || this.__starting) {\n      return;\n    }\n\n    this.__middlewareChainRun = compose(this.middlewares);\n\n    this.__listenNavigation();\n\n    console.info(`Starting ${this.is}:${this.__id} ...`);\n\n    this.__starting = true;\n    let executed = await this.__execute();\n    this.__starting = false;\n\n    if (executed) {\n      console.info(`Started ${this.is}:${this.__id}`);\n\n      this.__started = true;\n\n      this.fire('started');\n    }\n  }\n\n  __listenNavigation () {\n    let callback = () => {\n      this.__execute();\n    };\n\n    if (this.mode === 'history') {\n      event(window).on('popstate', callback);\n      event(document).on('click', evt => {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n\n          let state = { url: evt.target.getAttribute('href') };\n          this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\n          callback();\n        }\n      });\n    } else {\n      event(window).on('hashchange', callback);\n    }\n  }\n\n  get started () {\n    return this.__started || false;\n  }\n\n  getFragmentExecutors (fragment) {\n    return this.handlers.reduce((executors, handler) => {\n      let executor = handler.getExecutorFor(fragment);\n      if (executor) executors.push(executor);\n      return executors;\n    }, []);\n  }\n\n  async __execute () {\n    let fragment = this.getFragment();\n    let context = { app: this, uri: fragment };\n\n    // run middleware chain then execute all executors\n    let willContinue = await this.__middlewareChainRun(context, () => {\n      let executors = this.getFragmentExecutors(context.uri);\n      if (executors.length === 0) {\n        this.notFound(fragment);\n        this.fire('route-not-found', fragment);\n        return;\n      }\n\n      executors.forEach(executor => {\n        executor.handler.callback(executor.args, context);\n      });\n    });\n\n    if (willContinue === false) {\n      return false;\n    }\n\n    this.fire('navigated', context);\n    return true;\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      let url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.__execute();\n      }\n    } else {\n      this.location.hash = this.hash + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  getFragment () {\n    try {\n      let fragment;\n      if (this.mode === 'history') {\n        fragment = decodeURI(this.location.pathname + this.location.search);\n        fragment = fragment.replace(/\\?(.*)$/, '');\n        fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n      } else {\n        let match = this.location.href.match(this.hashRegexp);\n        fragment = match ? match[1] : '';\n      }\n\n      return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n    } catch (err) {\n      console.error('Fragment is not match any pattern, fallback to /');\n      return '/';\n    }\n  }\n\n  // $back (evt) {\n  //   evt.preventDefault();\n  //   this.history.back();\n  // }\n}\n\nxin.define('xin-app', App);\n\nfunction compose (middlewares) {\n  for (let fn of middlewares) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('Middleware must be composed of functions!');\n    }\n  }\n\n  return async (context, next) => {\n    // last called middlewares #\n    let index = -1;\n\n    async function dispatch (i) {\n      if (i <= index) {\n        throw new Error('next() called multiple times');\n      }\n\n      index = i;\n      let fn = middlewares[i];\n      if (i === middlewares.length) {\n        fn = next;\n      }\n      if (!fn) {\n        return;\n      }\n\n      return await fn(context, () => dispatch(i + 1));\n    }\n\n    return dispatch(0);\n  };\n}\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./components/app.js"],"sourceRoot":""}