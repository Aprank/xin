{"version":3,"sources":["webpack:///./components/lib/route.js","webpack:///./components/app.js"],"names":["Route","routeRegExp","str","chunks","split","length","Error","tokens","re","replace","g","token","push","optRe","slice","RegExp","isStatic","pattern","match","constructor","route","callback","type","args","result","getExecutorFor","fragment","handler","reduce","name","index","App","xin","Component","props","docTitle","String","value","observer","manual","Boolean","mode","rootUri","hash","hashRegexp","_hashRegexp","_hash","notFound","console","warn","_titleChanged","title","document","created","put","__appSignature","location","window","history","handlers","middlewares","__started","__starting","attached","async","start","__middlewareChainRun","compose","__listenNavigation","info","is","__id","executed","__execute","fire","event","on","evt","defaultPrevented","target","nodeName","preventDefault","state","url","getAttribute","pushState","innerHTML","href","started","getFragmentExecutors","executors","executor","getFragment","context","app","uri","willContinue","forEach","navigate","path","options","toString","origin","use","middleware","decodeURI","pathname","search","err","error","define","fn","TypeError","next","i","dispatch"],"mappings":"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","file":"components/app.js","sourcesContent":["class Route {\n  static routeRegExp (str) {\n    let chunks = str.split('[');\n\n    if (chunks.length > 2) {\n      throw new Error('Invalid use of optional params');\n    }\n\n    let tokens = [];\n    let re = chunks[0].replace(/{([^}]+)}/g, function (g, token) {\n      tokens.push(token);\n      return '([^/]+)';\n    }).replace(/\\//g, '\\\\/');\n\n    let optRe = '';\n\n    if (chunks[1]) {\n      optRe = '(?:' + chunks[1].slice(0, -1).replace(/{([^}]+)}/g, function (g, token) {\n        tokens.push(token);\n        return '([^/]+)';\n      }).replace(/\\//g, '\\\\/') + ')?';\n    }\n    return [ new RegExp('^' + re + optRe + '$'), tokens ];\n  }\n\n  static isStatic (pattern) {\n    return !pattern.match(/[[{]/);\n  }\n\n  constructor (route, callback) {\n    this.route = route;\n    this.callback = callback;\n\n    if (Route.isStatic(route)) {\n      this.type = 's';\n      this.pattern = null;\n      this.args = [];\n    } else {\n      let result = Route.routeRegExp(route);\n      this.type = 'v';\n      this.pattern = result[0];\n      this.args = result[1];\n    }\n  }\n\n  getExecutorFor (fragment) {\n    if (this.type === 's') {\n      if (fragment === this.route) {\n        return { handler: this, args: {} };\n      }\n    } else if (this.type === 'v') {\n      let result = fragment.match(this.pattern);\n      if (result) {\n        return {\n          handler: this,\n          args: this.args.reduce((args, name, index) => {\n            args[name] = result[index + 1];\n            return args;\n          }, {}),\n        };\n      }\n    }\n  }\n}\n\nexport default Route;\n\n\n\n// WEBPACK FOOTER //\n// ./components/lib/route.js","import xin from '../';\nimport event from '../event';\n\nimport Route from './lib/route';\n\nclass App extends xin.Component {\n  get props () {\n    return {\n      docTitle: {\n        type: String,\n        value: 'Application',\n        observer: '_titleChanged',\n      },\n\n      manual: {\n        type: Boolean,\n      },\n\n      mode: {\n        type: String,\n        value: 'hash',\n      },\n\n      rootUri: {\n        type: String,\n        value: '/',\n      },\n\n      hash: {\n        type: String,\n        value: '#!',\n      },\n    };\n  }\n\n  get hashRegexp () {\n    if (!this._hashRegexp || this._hash !== this.hash) {\n      this._hashRegexp = new RegExp(`${this.hash}(.*)$`);\n      this._hash = this.hash;\n    }\n\n    return this._hashRegexp;\n  }\n\n  notFound (fragment) {\n    console.warn(`Route not found: ${fragment}`);\n  }\n\n  _titleChanged (title) {\n    document.title = title;\n  }\n\n  created () {\n    xin.put('app', this);\n\n    this.__appSignature = true;\n    this.location = window.location;\n    this.history = window.history;\n\n    // default values\n    this.handlers = [];\n    this.middlewares = [];\n\n    this.__started = false;\n    this.__starting = false;\n  }\n\n  attached () {\n    if (!this.manual) {\n      this.async(() => {\n        this.start();\n      });\n    }\n  }\n\n  route (route, callback) {\n    this.handlers.push(new Route(route, callback));\n  }\n\n  async start () {\n    if (this.__started || this.__starting) {\n      return;\n    }\n\n    this.__middlewareChainRun = compose(this.middlewares);\n\n    this.__listenNavigation();\n\n    console.info(`Starting ${this.is}:${this.__id} ...`);\n\n    this.__starting = true;\n    let executed = await this.__execute();\n    this.__starting = false;\n\n    if (executed) {\n      console.info(`Started ${this.is}:${this.__id}`);\n\n      this.__started = true;\n\n      this.fire('started');\n    }\n  }\n\n  __listenNavigation () {\n    let callback = () => {\n      this.__execute();\n    };\n\n    if (this.mode === 'history') {\n      event(window).on('popstate', callback);\n      event(document).on('click', evt => {\n        if (!evt.defaultPrevented && evt.target.nodeName === 'A' && evt.target.target === '') {\n          evt.preventDefault();\n\n          let state = { url: evt.target.getAttribute('href') };\n          this.history.pushState(state, evt.target.innerHTML, evt.target.href);\n\n          callback();\n        }\n      });\n    } else {\n      event(window).on('hashchange', callback);\n    }\n  }\n\n  get started () {\n    return this.__started || false;\n  }\n\n  getFragmentExecutors (fragment) {\n    return this.handlers.reduce((executors, handler) => {\n      let executor = handler.getExecutorFor(fragment);\n      if (executor) executors.push(executor);\n      return executors;\n    }, []);\n  }\n\n  async __execute () {\n    let fragment = this.getFragment();\n    let context = { app: this, uri: fragment };\n\n    // run middleware chain then execute all executors\n    let willContinue = await this.__middlewareChainRun(context, () => {\n      let executors = this.getFragmentExecutors(context.uri);\n      if (executors.length === 0) {\n        this.notFound(fragment);\n        this.fire('route-not-found', fragment);\n        return;\n      }\n\n      executors.forEach(executor => {\n        executor.handler.callback(executor.args, context);\n      });\n    });\n\n    if (willContinue === false) {\n      return false;\n    }\n\n    this.fire('navigated', context);\n    return true;\n  }\n\n  navigate (path, options) {\n    path = path || '/';\n    options = options || {};\n\n    if (this.mode === 'history') {\n      let url = this.rootUri + path.toString().replace(/\\/$/, '').replace(/^\\//, '');\n      if (this.location.href.replace(this.location.origin, '') !== url) {\n        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n        this.__execute();\n      }\n    } else {\n      this.location.hash = this.hash + path;\n    }\n    return this;\n  }\n\n  use (middleware) {\n    this.middlewares.push(middleware);\n  }\n\n  getFragment () {\n    try {\n      let fragment;\n      if (this.mode === 'history') {\n        fragment = decodeURI(this.location.pathname + this.location.search);\n        fragment = fragment.replace(/\\?(.*)$/, '');\n        fragment = this.rootUri === '/' ? fragment : fragment.replace(this.rootUri, '');\n      } else {\n        let match = this.location.href.match(this.hashRegexp);\n        fragment = match ? match[1] : '';\n      }\n\n      return '/' + fragment.toString().replace(/\\/$/, '').replace(/^\\//, '');\n    } catch (err) {\n      console.error('Fragment is not match any pattern, fallback to /');\n      return '/';\n    }\n  }\n\n  // $back (evt) {\n  //   evt.preventDefault();\n  //   this.history.back();\n  // }\n}\n\nxin.define('xin-app', App);\n\nfunction compose (middlewares) {\n  for (let fn of middlewares) {\n    if (typeof fn !== 'function') {\n      throw new TypeError('Middleware must be composed of functions!');\n    }\n  }\n\n  return async (context, next) => {\n    // last called middlewares #\n    let index = -1;\n\n    async function dispatch (i) {\n      if (i <= index) {\n        throw new Error('next() called multiple times');\n      }\n\n      index = i;\n      let fn = middlewares[i];\n      if (i === middlewares.length) {\n        fn = next;\n      }\n      if (!fn) {\n        return;\n      }\n\n      return await fn(context, () => dispatch(i + 1));\n    }\n\n    return dispatch(0);\n  };\n}\n\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./components/app.js"],"sourceRoot":""}