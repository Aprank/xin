webpackJsonp([2],{11:function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function(){function t(e,n){if(r(this,t),this.route=e,this.callback=n,t.isStatic(e))this.type="s",this.pattern=null,this.args=[];else{var i=t.routeRegExp(e);this.type="v",this.pattern=i[0],this.args=i[1]}}return i(t,null,[{key:"routeRegExp",value:function(t){var e=t.split("[");if(e.length>2)throw new Error("Invalid use of optional params");var r=[],n=e[0].replace(/{([^}]+)}/g,function(t,e){return r.push(e),"([^/]+)"}).replace(/\//g,"\\/"),i="";return e[1]&&(i="(?:"+e[1].slice(0,-1).replace(/{([^}]+)}/g,function(t,e){return r.push(e),"([^/]+)"}).replace(/\//g,"\\/")+")?"),[new RegExp("^"+n+i+"$"),r]}},{key:"isStatic",value:function(t){return!t.match(/[[{]/)}}]),i(t,[{key:"getExecutorFor",value:function(t){var e=this;if("s"===this.type){if(t===this.route)return{handler:this,args:{}}}else if("v"===this.type){var r=function(){var r=t.match(e.pattern);if(r)return{v:{handler:e,args:e.args.reduce(function(t,e,n){return t[e]=r[n+1],t},{})}}}();if("object"===("undefined"==typeof r?"undefined":n(r)))return r.v}}}]),t}();e.default=a},28:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function n(i,a){try{var o=e[i](a),u=o.value}catch(t){return void r(t)}return o.done?void t(u):Promise.resolve(u).then(function(t){n("next",t)},function(t){n("throw",t)})}return n("next")})}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=this,r=!0,n=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;if("function"!=typeof s)throw new TypeError("Middleware must be composed of functions!")}}catch(t){n=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(n)throw a}}return function(){var r=i(regeneratorRuntime.mark(function r(n,a){var o,u=function(){var e=i(regeneratorRuntime.mark(function e(r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<=o)){e.next=2;break}throw new Error("next() called multiple times");case 2:if(o=r,i=t[r],r===t.length&&(i=a),i){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,i(n,function(){return u(r+1)});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=-1,t.abrupt("return",u(0));case 2:case"end":return t.stop()}},r,e)}));return function(t,e){return r.apply(this,arguments)}}()}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=r(0),l=n(f),h=r(11),p=n(h),d=function(t){function e(){return a(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),c(e,[{key:"notFound",value:function(t){console.warn("Route not found: "+t)}},{key:"_titleChanged",value:function(t){document.title=t}},{key:"created",value:function(){l.default.put("app",this),this.__appSignature=!0,this.location=window.location,this.history=window.history,this.handlers=[],this.middlewares=[],this.__started=!1,this.__starting=!1}},{key:"attached",value:function(){var t=this;this.manual||this.async(function(){t.start()})}},{key:"route",value:function(t,e){this.handlers.push(new p.default(t,e))}},{key:"start",value:function(){function t(){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.__started&&!this.__starting){t.next=2;break}return t.abrupt("return");case 2:return this.__middlewareChainRun=s(this.middlewares),this.__listenNavigation(),console.info("Starting "+this.is+":"+this.__id+" ..."),this.__starting=!0,t.next=8,this.__execute();case 8:e=t.sent,this.__starting=!1,e&&(console.info("Started "+this.is+":"+this.__id),this.__started=!0,this.fire("started"));case 11:case"end":return t.stop()}},t,this)}));return t}()},{key:"__listenNavigation",value:function(){var t=this,e=function(){t.__execute()};"history"===this.mode?(l.default.event(window).on("popstate",e),l.default.event(document).on("click",function(r){if(!r.defaultPrevented&&"A"===r.target.nodeName&&""===r.target.target){r.preventDefault();var n={url:r.target.getAttribute("href")};t.history.pushState(n,r.target.innerHTML,r.target.href),e()}})):l.default.event(window).on("hashchange",e)}},{key:"getFragmentExecutors",value:function(t){return this.handlers.reduce(function(e,r){var n=r.getExecutorFor(t);return n&&e.push(n),e},[])}},{key:"__execute",value:function(){function t(){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(){var e,r,n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getFragment(),r={app:this,uri:e},t.next=4,this.__middlewareChainRun(r,function(){var t=i.getFragmentExecutors(r.uri);return 0===t.length?(i.notFound(e),void i.fire("route-not-found",e)):void t.forEach(function(t){t.handler.callback(t.args,r)})});case 4:if(n=t.sent,n!==!1){t.next=7;break}return t.abrupt("return",!1);case 7:return this.fire("navigated",r),t.abrupt("return",!0);case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"navigate",value:function(t,e){if(t=t||"/",e=e||{},"history"===this.mode){var r=this.rootUri+t.toString().replace(/\/$/,"").replace(/^\//,"");this.location.href.replace(this.location.origin,"")!==r&&(this.history[e.replace?"replaceState":"pushState"]({},document.title,r),this.__execute())}else this.location.href.match(this.hashSeparator),this.location.href=this.location.href.replace(this.hashSeparator,"")+this.hashSeparator+t;return this}},{key:"use",value:function(t){this.middlewares.push(t)}},{key:"getFragment",value:function(){try{var t=void 0;if("history"===this.mode)t=decodeURI(this.location.pathname+this.location.search),t=t.replace(/\?(.*)$/,""),t="/"===this.rootUri?t:t.replace(this.rootUri,"");else{var e=this.location.href.match(this.hashSeparator);t=e?e[1]:""}return"/"+t.toString().replace(/\/$/,"").replace(/^\//,"")}catch(t){return console.error("Fragment is not match any pattern, fallback to /"),"/"}}},{key:"props",get:function(){return{docTitle:{type:String,value:"Application",observer:"_titleChanged"},manual:{type:Boolean},mode:{type:String,value:"hash"},rootUri:{type:String,value:"/"},hashSeparator:{type:RegExp,value:function(){return/#!(.*)$/}}}}},{key:"started",get:function(){return this.__started||!1}}]),e}(l.default.Component);l.default.define("xin-app",d),e.default=d}},[28]);