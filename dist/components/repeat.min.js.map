{"version":3,"sources":["webpack:///components/repeat.min.js","webpack:///./components/repeat.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","xin","FILTER_ALL","Repeat","_xin$Component","this","getPrototypeOf","apply","arguments","rowProto","base","is","templateHost","__set","set","name","nameSegments","split","as","indexAs","__host","__get","get","content","HTMLTemplateElement","decorate","Row","item","index","row","fragment","document","importNode","__root","dom","childNodes","map","node","__model","__index","__item","__initialize","__parent","__parseAnnotations","element","parentElement","filter","__itemsChanged","items","rows","forEach","__children","removeChild","createDocumentFragment","__insertRow","appendChild","push","err","console","error","stack","bind","insertBefore","type","Array","observer","String","Component","define","extends"],"mappings":"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","file":"components/repeat.min.js","sourcesContent":["webpackJsonp([2],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/* globals HTMLTemplateElement  */\n\t\n\tvar xin = __webpack_require__(1);\n\t\n\tvar FILTER_ALL = function FILTER_ALL() {\n\t  return true;\n\t};\n\t\n\tvar Repeat = function (_xin$Component) {\n\t  _inherits(Repeat, _xin$Component);\n\t\n\t  function Repeat() {\n\t    _classCallCheck(this, Repeat);\n\t\n\t    return _possibleConstructorReturn(this, (Repeat.__proto__ || Object.getPrototypeOf(Repeat)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Repeat, [{\n\t    key: 'created',\n\t    value: function created() {\n\t      this.rowProto = xin.base({\n\t        is: '$xin-repeat-row'\n\t      });\n\t\n\t      var templateHost = this;\n\t      var __set = this.rowProto.set;\n\t      this.rowProto.set = function (name, value) {\n\t        var nameSegments = name.split('.');\n\t        switch (nameSegments[0]) {\n\t          case templateHost.as:\n\t          case templateHost.indexAs:\n\t            return __set.apply(this, arguments);\n\t          default:\n\t            // var oldValue = this.__host.get(name);\n\t            return this.__host.set(name, value);\n\t        }\n\t      };\n\t\n\t      var __get = this.rowProto.get;\n\t      this.rowProto.get = function (name) {\n\t        var nameSegments = name.split('.');\n\t        switch (nameSegments[0]) {\n\t          case templateHost.as:\n\t          case templateHost.indexAs:\n\t            return __get.apply(this, arguments);\n\t          default:\n\t            return this.__host.get(name);\n\t        }\n\t      };\n\t\n\t      if (!this.content && HTMLTemplateElement.decorate) {\n\t        HTMLTemplateElement.decorate(this);\n\t      }\n\t\n\t      // Row is class to create new row\n\t      var self = this;\n\t      this.Row = function (item, index) {\n\t        var row = this;\n\t        var fragment = this.fragment = document.importNode(self.content, true);\n\t        this.__root = xin.dom(fragment).childNodes.map(function (node) {\n\t          node.__model = row;\n\t          node.__index = index;\n\t          node.__item = item;\n\t          return node;\n\t        });\n\t\n\t        this.__initialize();\n\t\n\t        this.__host = self.__parent;\n\t\n\t        this.__parseAnnotations();\n\t\n\t        this.set(self.as, item);\n\t\n\t        // if (self.parentElement) {\n\t        //  xin.dom(self.parentElement).insertBefore(fragment, self);\n\t        // }\n\t      };\n\t      this.Row.prototype = this.rowProto;\n\t    }\n\t  }, {\n\t    key: 'itemForElement',\n\t    value: function itemForElement(element) {\n\t      while (element && !element.__model) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__item;\n\t    }\n\t  }, {\n\t    key: 'indexForElement',\n\t    value: function indexForElement(element) {\n\t      while (element && !element.__model) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__index;\n\t    }\n\t  }, {\n\t    key: 'modelForElement',\n\t    value: function modelForElement(element) {\n\t      while (element && !element.__model) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__model;\n\t    }\n\t  }, {\n\t    key: '_filterChanged',\n\t    value: function _filterChanged(filter) {\n\t      if (typeof filter !== 'function') {\n\t        return;\n\t      }\n\t\n\t      this.__itemsChanged(this.items);\n\t    }\n\t  }, {\n\t    key: '__insertRow',\n\t    value: function __insertRow(item, index) {\n\t      // var fragment = document.importNode(this.content, true);\n\t      // var row = {\n\t      //  __root: xin.dom(fragment).childNodes\n\t      // };\n\t\n\t      // row.__root.forEach(function(node) {\n\t      //  node.__model = row;\n\t      //  node.__index = index;\n\t      //  node.__item = item;\n\t      // });\n\t\n\t      // Object.setPrototypeOf(row, this.rowProto);\n\t\n\t      // row.__initialize();\n\t\n\t      // row.__host = this.__parent;\n\t\n\t      // row.__parseAnnotations();\n\t\n\t      // row.set(this.as, item);\n\t\n\t      // if (this.parentElement) {\n\t      //  xin.dom(this.parentElement).insertBefore(fragment, this);\n\t      // }\n\t\n\t      var row = new this.Row(item, index);\n\t\n\t      return row;\n\t    }\n\t  }, {\n\t    key: '__itemsChanged',\n\t    value: function __itemsChanged(items /* , oldItems */) {\n\t      if (this.rows && this.rows.length) {\n\t        this.rows.forEach(function (row) {\n\t          row.__children.forEach(function (node) {\n\t            node.parentElement.removeChild(node);\n\t          });\n\t        });\n\t      }\n\t\n\t      this.rows = [];\n\t\n\t      // when no items rows must be empty\n\t      if (!items) {\n\t        return;\n\t      }\n\t\n\t      var filter = this.filter || FILTER_ALL;\n\t\n\t      var fragment = document.createDocumentFragment();\n\t      items.filter(filter).forEach(function (item, index) {\n\t        try {\n\t          var row = this.__insertRow(item, index);\n\t          fragment.appendChild(row.fragment);\n\t          this.rows.push(row);\n\t        } catch (err) {\n\t          console.error(err.stack);\n\t        }\n\t      }.bind(this));\n\t\n\t      if (this.parentElement) {\n\t        xin.dom(this.parentElement).insertBefore(fragment, this);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'props',\n\t    get: function get() {\n\t      return {\n\t        items: {\n\t          type: Array,\n\t          observer: '__itemsChanged'\n\t        },\n\t\n\t        as: {\n\t          type: String,\n\t          value: 'item'\n\t        },\n\t\n\t        indexAs: {\n\t          type: String,\n\t          value: 'index'\n\t        },\n\t\n\t        filter: {\n\t          type: Object,\n\t          observer: '_filterChanged'\n\t        }\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return Repeat;\n\t}(xin.Component);\n\t\n\txin.define('xin-repeat', Repeat, { extends: 'template' });\n\txin.Repeat = Repeat;\n\t\n\tmodule.exports = Repeat;\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** components/repeat.min.js\n **/","/* globals HTMLTemplateElement  */\n\nconst xin = require('../');\n\nconst FILTER_ALL = () => true;\n\nclass Repeat extends xin.Component {\n  get props () {\n    return {\n      items: {\n        type: Array,\n        observer: '__itemsChanged',\n      },\n\n      as: {\n        type: String,\n        value: 'item',\n      },\n\n      indexAs: {\n        type: String,\n        value: 'index',\n      },\n\n      filter: {\n        type: Object,\n        observer: '_filterChanged',\n      },\n    };\n  }\n\n  created () {\n    this.rowProto = xin.base({\n      is: '$xin-repeat-row',\n    });\n\n    var templateHost = this;\n    var __set = this.rowProto.set;\n    this.rowProto.set = function (name, value) {\n      var nameSegments = name.split('.');\n      switch (nameSegments[0]) {\n        case templateHost.as:\n        case templateHost.indexAs:\n          return __set.apply(this, arguments);\n        default:\n          // var oldValue = this.__host.get(name);\n          return this.__host.set(name, value);\n      }\n    };\n\n    var __get = this.rowProto.get;\n    this.rowProto.get = function (name) {\n      var nameSegments = name.split('.');\n      switch (nameSegments[0]) {\n        case templateHost.as:\n        case templateHost.indexAs:\n          return __get.apply(this, arguments);\n        default:\n          return this.__host.get(name);\n      }\n    };\n\n    if (!this.content && HTMLTemplateElement.decorate) {\n      HTMLTemplateElement.decorate(this);\n    }\n\n    // Row is class to create new row\n    var self = this;\n    this.Row = function (item, index) {\n      var row = this;\n      var fragment = this.fragment = document.importNode(self.content, true);\n      this.__root = xin.dom(fragment).childNodes.map(function (node) {\n        node.__model = row;\n        node.__index = index;\n        node.__item = item;\n        return node;\n      });\n\n      this.__initialize();\n\n      this.__host = self.__parent;\n\n      this.__parseAnnotations();\n\n      this.set(self.as, item);\n\n      // if (self.parentElement) {\n      //  xin.dom(self.parentElement).insertBefore(fragment, self);\n      // }\n    };\n    this.Row.prototype = this.rowProto;\n  }\n\n  itemForElement (element) {\n    while (element && !element.__model) {\n      element = element.parentElement;\n    }\n    return element.__item;\n  }\n\n  indexForElement (element) {\n    while (element && !element.__model) {\n      element = element.parentElement;\n    }\n    return element.__index;\n  }\n\n  modelForElement (element) {\n    while (element && !element.__model) {\n      element = element.parentElement;\n    }\n    return element.__model;\n  }\n\n  _filterChanged (filter) {\n    if (typeof filter !== 'function') {\n      return;\n    }\n\n    this.__itemsChanged(this.items);\n  }\n\n  __insertRow (item, index) {\n    // var fragment = document.importNode(this.content, true);\n    // var row = {\n    //  __root: xin.dom(fragment).childNodes\n    // };\n\n    // row.__root.forEach(function(node) {\n    //  node.__model = row;\n    //  node.__index = index;\n    //  node.__item = item;\n    // });\n\n    // Object.setPrototypeOf(row, this.rowProto);\n\n    // row.__initialize();\n\n    // row.__host = this.__parent;\n\n    // row.__parseAnnotations();\n\n    // row.set(this.as, item);\n\n    // if (this.parentElement) {\n    //  xin.dom(this.parentElement).insertBefore(fragment, this);\n    // }\n\n    var row = new this.Row(item, index);\n\n    return row;\n  }\n\n  __itemsChanged (items /* , oldItems */) {\n    if (this.rows && this.rows.length) {\n      this.rows.forEach(function (row) {\n        row.__children.forEach(function (node) {\n          node.parentElement.removeChild(node);\n        });\n      });\n    }\n\n    this.rows = [];\n\n    // when no items rows must be empty\n    if (!items) {\n      return;\n    }\n\n    var filter = this.filter || FILTER_ALL;\n\n    var fragment = document.createDocumentFragment();\n    items.filter(filter).forEach(function (item, index) {\n      try {\n        var row = this.__insertRow(item, index);\n        fragment.appendChild(row.fragment);\n        this.rows.push(row);\n      } catch (err) {\n        console.error(err.stack);\n      }\n    }.bind(this));\n\n    if (this.parentElement) {\n      xin.dom(this.parentElement).insertBefore(fragment, this);\n    }\n  }\n}\n\nxin.define('xin-repeat', Repeat, { extends: 'template' });\nxin.Repeat = Repeat;\n\nmodule.exports = Repeat;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/repeat.js\n **/"],"sourceRoot":""}