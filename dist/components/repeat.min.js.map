{"version":3,"sources":["webpack:///components/repeat.min.js","webpack:///./components/repeat.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","_src","_src2","_templateBinding","_templateBinding2","FILTER_ALL","RepeatRow","_T","repeat","item","index","this","_this","__templateInitialize","__templateModel","is","__id","__templateId","__repeat","__repeatAs","as","__repeatIndexAs","indexAs","__templateChildNodes","forEach","node","nodeType","window","Node","ELEMENT_NODE","__repeatModel","update","__templateRender","notify","path","__templateGetPathAsArray","__templateHost","set","Repeat","_xin$base","apply","arguments","items","_this3","rows","len","filter","push","splice","element","parentElement","_itemsChanged","type","Array","observer","String","base","define","extends"],"mappings":"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","file":"components/repeat.min.js","sourcesContent":["webpackJsonp([2],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tvar _src = __webpack_require__(1);\n\t\n\tvar _src2 = _interopRequireDefault(_src);\n\t\n\tvar _templateBinding = __webpack_require__(4);\n\t\n\tvar _templateBinding2 = _interopRequireDefault(_templateBinding);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar FILTER_ALL = function FILTER_ALL() {\n\t  return true;\n\t};\n\t\n\tvar RepeatRow = function (_T) {\n\t  _inherits(RepeatRow, _T);\n\t\n\t  function RepeatRow(repeat, item, index) {\n\t    _classCallCheck(this, RepeatRow);\n\t\n\t    // override T constructor\n\t    var _this = _possibleConstructorReturn(this, (RepeatRow.__proto__ || Object.getPrototypeOf(RepeatRow)).call(this));\n\t\n\t    _this.__templateInitialize(repeat, repeat.__templateModel, repeat);\n\t\n\t    _this.is = '$repeat-row';\n\t    _this.__id = _this.__templateId;\n\t\n\t    _this.__repeat = repeat;\n\t    _this.__repeatAs = repeat.as;\n\t    _this.__repeatIndexAs = repeat.indexAs;\n\t\n\t    _this.__templateChildNodes.forEach(function (node) {\n\t      if (node.nodeType === window.Node.ELEMENT_NODE) {\n\t        node.__repeatModel = _this;\n\t      }\n\t    });\n\t\n\t    _this.update(item, index);\n\t\n\t    _this.__templateRender();\n\t    return _this;\n\t  }\n\t\n\t  _createClass(RepeatRow, [{\n\t    key: 'update',\n\t    value: function update(item, index) {\n\t      this[this.__repeatAs] = item;\n\t      this[this.__repeatIndexAs] = index;\n\t      this.notify(this.__repeatAs, item);\n\t      this.notify(this.__repeatIndexAs, index);\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(path, value) {\n\t      path = this.__templateGetPathAsArray(path);\n\t\n\t      if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n\t        return _get(RepeatRow.prototype.__proto__ || Object.getPrototypeOf(RepeatRow.prototype), 'set', this).call(this, path, value);\n\t      }\n\t\n\t      return this.__templateHost.set(path, value);\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(path) {\n\t      path = this.__templateGetPathAsArray(path);\n\t\n\t      if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n\t        return _get(RepeatRow.prototype.__proto__ || Object.getPrototypeOf(RepeatRow.prototype), 'get', this).call(this, path);\n\t      }\n\t\n\t      return this.__templateHost.get(path);\n\t    }\n\t  }, {\n\t    key: 'notify',\n\t    value: function notify(path, value) {\n\t      path = this.__templateGetPathAsArray(path);\n\t\n\t      if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n\t        return _get(RepeatRow.prototype.__proto__ || Object.getPrototypeOf(RepeatRow.prototype), 'notify', this).call(this, path, value);\n\t      }\n\t\n\t      return this.__templateHost.notify(path, value);\n\t    }\n\t  }]);\n\t\n\t  return RepeatRow;\n\t}(_templateBinding2.default);\n\t\n\t;\n\t\n\tvar Repeat = function (_xin$base) {\n\t  _inherits(Repeat, _xin$base);\n\t\n\t  function Repeat() {\n\t    _classCallCheck(this, Repeat);\n\t\n\t    return _possibleConstructorReturn(this, (Repeat.__proto__ || Object.getPrototypeOf(Repeat)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Repeat, [{\n\t    key: '__initTemplate',\n\t    value: function __initTemplate() {\n\t      _templateBinding2.default.prototype.__templateInitialize.call(this, null, this);\n\t    }\n\t  }, {\n\t    key: '_itemsChanged',\n\t    value: function _itemsChanged(items) {\n\t      var _this3 = this;\n\t\n\t      this.rows = this.rows || [];\n\t\n\t      var len = 0;\n\t\n\t      if (items && items.length) {\n\t        (function () {\n\t          var filter = _this3.filter || FILTER_ALL;\n\t          items.forEach(function (item, index) {\n\t            if (filter(item)) {\n\t              if (_this3.rows[index]) {\n\t                _this3.rows[index].update(item, index);\n\t              } else {\n\t                _this3.rows.push(new RepeatRow(_this3, item, index));\n\t              }\n\t\n\t              len++;\n\t            }\n\t          });\n\t        })();\n\t      }\n\t\n\t      this.rows.splice(len);\n\t\n\t      // move to detach\n\t      // this.rows.splice(len).forEach(row => {\n\t      //   row.__templateUninitialize();\n\t      // });\n\t    }\n\t  }, {\n\t    key: 'itemForElement',\n\t    value: function itemForElement(element) {\n\t      while (element && !element.__repeatModel) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__repeatModel.get(this.as);\n\t    }\n\t  }, {\n\t    key: 'indexForElement',\n\t    value: function indexForElement(element) {\n\t      while (element && !element.__repeatModel) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__repeatModel.get(this.indexAs);\n\t    }\n\t  }, {\n\t    key: 'modelForElement',\n\t    value: function modelForElement(element) {\n\t      while (element && !element.__repeatModel) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__repeatModel;\n\t    }\n\t  }, {\n\t    key: '_filterChanged',\n\t    value: function _filterChanged(filter) {\n\t      if (typeof filter !== 'function') {\n\t        return;\n\t      }\n\t\n\t      this._itemsChanged(this.items);\n\t    }\n\t  }, {\n\t    key: 'props',\n\t    get: function get() {\n\t      return {\n\t        items: {\n\t          type: Array,\n\t          observer: '_itemsChanged'\n\t        },\n\t\n\t        as: {\n\t          type: String,\n\t          value: 'item'\n\t        },\n\t\n\t        indexAs: {\n\t          type: String,\n\t          value: 'index'\n\t        },\n\t\n\t        filter: {\n\t          type: Object,\n\t          observer: '_filterChanged'\n\t        }\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return Repeat;\n\t}(_src2.default.base('HTMLTemplateElement'));\n\t\n\t_src2.default.define('xin-repeat', Repeat, { extends: 'template' });\n\t_src2.default.Repeat = Repeat;\n\t\n\texports.default = Repeat;\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// components/repeat.min.js","import xin from '../src';\nimport T from 'template-binding';\n\nconst FILTER_ALL = () => true;\n\nclass RepeatRow extends T {\n  constructor (repeat, item, index) {\n    super();\n\n    // override T constructor\n    this.__templateInitialize(repeat, repeat.__templateModel, repeat);\n\n    this.is = '$repeat-row';\n    this.__id = this.__templateId;\n\n    this.__repeat = repeat;\n    this.__repeatAs = repeat.as;\n    this.__repeatIndexAs = repeat.indexAs;\n\n    this.__templateChildNodes.forEach(node => {\n      if (node.nodeType === window.Node.ELEMENT_NODE) {\n        node.__repeatModel = this;\n      }\n    });\n\n    this.update(item, index);\n\n    this.__templateRender();\n  }\n\n  update (item, index) {\n    this[this.__repeatAs] = item;\n    this[this.__repeatIndexAs] = index;\n    this.notify(this.__repeatAs, item);\n    this.notify(this.__repeatIndexAs, index);\n  }\n\n  set (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n      return super.set(path, value);\n    }\n\n    return this.__templateHost.set(path, value);\n  }\n\n  get (path) {\n    path = this.__templateGetPathAsArray(path);\n\n    if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n      return super.get(path);\n    }\n\n    return this.__templateHost.get(path);\n  }\n\n  notify (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n      return super.notify(path, value);\n    }\n\n    return this.__templateHost.notify(path, value);\n  }\n};\n\nclass Repeat extends xin.base('HTMLTemplateElement') {\n  get props () {\n    return {\n      items: {\n        type: Array,\n        observer: '_itemsChanged',\n      },\n\n      as: {\n        type: String,\n        value: 'item',\n      },\n\n      indexAs: {\n        type: String,\n        value: 'index',\n      },\n\n      filter: {\n        type: Object,\n        observer: '_filterChanged',\n      },\n    };\n  }\n\n  __initTemplate () {\n    T.prototype.__templateInitialize.call(this, null, this);\n  }\n\n  _itemsChanged (items) {\n    this.rows = this.rows || [];\n\n    let len = 0;\n\n    if (items && items.length) {\n      let filter = this.filter || FILTER_ALL;\n      items.forEach((item, index) => {\n        if (filter(item)) {\n          if (this.rows[index]) {\n            this.rows[index].update(item, index);\n          } else {\n            this.rows.push(new RepeatRow(this, item, index));\n          }\n\n          len++;\n        }\n      });\n    }\n\n    this.rows.splice(len);\n\n    // move to detach\n    // this.rows.splice(len).forEach(row => {\n    //   row.__templateUninitialize();\n    // });\n  }\n\n  itemForElement (element) {\n    while (element && !element.__repeatModel) {\n      element = element.parentElement;\n    }\n    return element.__repeatModel.get(this.as);\n  }\n\n  indexForElement (element) {\n    while (element && !element.__repeatModel) {\n      element = element.parentElement;\n    }\n    return element.__repeatModel.get(this.indexAs);\n  }\n\n  modelForElement (element) {\n    while (element && !element.__repeatModel) {\n      element = element.parentElement;\n    }\n    return element.__repeatModel;\n  }\n\n  _filterChanged (filter) {\n    if (typeof filter !== 'function') {\n      return;\n    }\n\n    this._itemsChanged(this.items);\n  }\n}\n\nxin.define('xin-repeat', Repeat, { extends: 'template' });\nxin.Repeat = Repeat;\n\nexport default Repeat;\n\n\n\n// WEBPACK FOOTER //\n// ./components/repeat.js"],"sourceRoot":""}