{"version":3,"sources":["webpack:///components/repeat.min.js","webpack:///./components/repeat.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","xin","T","FILTER_ALL","RepeatRow","_T","repeat","item","index","this","_this","__templateModel","__repeat","__repeatAs","as","__repeatIndexAs","indexAs","__templateChildNodes","forEach","node","nodeType","Node","ELEMENT_NODE","__repeatModel","update","render","notify","path","__templateGetPathAsArray","__templateHost","set","Repeat","_xin$base","apply","arguments","__templateInitialize","items","_this3","rows","len","filter","push","splice","row","__templateUninitialize","element","parentElement","_itemsChanged","type","Array","observer","String","base","define","extends"],"mappings":"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","file":"components/repeat.min.js","sourcesContent":["webpackJsonp([2],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/* globals Node */\n\t\n\tvar xin = __webpack_require__(1);\n\tvar T = __webpack_require__(4);\n\t\n\tvar FILTER_ALL = function FILTER_ALL() {\n\t  return true;\n\t};\n\t\n\tvar RepeatRow = function (_T) {\n\t  _inherits(RepeatRow, _T);\n\t\n\t  function RepeatRow(repeat, item, index) {\n\t    _classCallCheck(this, RepeatRow);\n\t\n\t    var _this = _possibleConstructorReturn(this, (RepeatRow.__proto__ || Object.getPrototypeOf(RepeatRow)).call(this, repeat, repeat.__templateModel, repeat));\n\t\n\t    _this.__repeat = repeat;\n\t    _this.__repeatAs = repeat.as;\n\t    _this.__repeatIndexAs = repeat.indexAs;\n\t\n\t    _this.__templateChildNodes.forEach(function (node) {\n\t      if (node.nodeType === Node.ELEMENT_NODE) {\n\t        node.__repeatModel = _this;\n\t      }\n\t    });\n\t\n\t    _this.update(item, index);\n\t\n\t    _this.render();\n\t    return _this;\n\t  }\n\t\n\t  _createClass(RepeatRow, [{\n\t    key: 'update',\n\t    value: function update(item, index) {\n\t      this[this.__repeatAs] = item;\n\t      this[this.__repeatIndexAs] = index;\n\t      this.notify(this.__repeatAs, item);\n\t      this.notify(this.__repeatIndexAs, index);\n\t    }\n\t  }, {\n\t    key: 'set',\n\t    value: function set(path, value) {\n\t      path = this.__templateGetPathAsArray(path);\n\t\n\t      if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n\t        return _get(RepeatRow.prototype.__proto__ || Object.getPrototypeOf(RepeatRow.prototype), 'set', this).call(this, path, value);\n\t      }\n\t\n\t      return this.__templateHost.set(path, value);\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(path) {\n\t      path = this.__templateGetPathAsArray(path);\n\t\n\t      if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n\t        return _get(RepeatRow.prototype.__proto__ || Object.getPrototypeOf(RepeatRow.prototype), 'get', this).call(this, path);\n\t      }\n\t\n\t      return this.__templateHost.get(path);\n\t    }\n\t  }, {\n\t    key: 'notify',\n\t    value: function notify(path, value) {\n\t      path = this.__templateGetPathAsArray(path);\n\t\n\t      if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n\t        return _get(RepeatRow.prototype.__proto__ || Object.getPrototypeOf(RepeatRow.prototype), 'notify', this).call(this, path, value);\n\t      }\n\t\n\t      return this.__templateHost.notify(path, value);\n\t    }\n\t  }]);\n\t\n\t  return RepeatRow;\n\t}(T);\n\t\n\t;\n\t\n\tvar Repeat = function (_xin$base) {\n\t  _inherits(Repeat, _xin$base);\n\t\n\t  function Repeat() {\n\t    _classCallCheck(this, Repeat);\n\t\n\t    return _possibleConstructorReturn(this, (Repeat.__proto__ || Object.getPrototypeOf(Repeat)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(Repeat, [{\n\t    key: '__initTemplate',\n\t    value: function __initTemplate() {\n\t      T.prototype.__templateInitialize.call(this, null, this);\n\t    }\n\t  }, {\n\t    key: '_itemsChanged',\n\t    value: function _itemsChanged(items) {\n\t      var _this3 = this;\n\t\n\t      this.rows = this.rows || [];\n\t\n\t      var len = 0;\n\t\n\t      if (items && items.length) {\n\t        (function () {\n\t          var filter = _this3.filter || FILTER_ALL;\n\t          items.forEach(function (item, index) {\n\t            if (filter(item)) {\n\t              if (_this3.rows[index]) {\n\t                _this3.rows[index].update(item, index);\n\t              } else {\n\t                _this3.rows.push(new RepeatRow(_this3, item, index));\n\t              }\n\t\n\t              len++;\n\t            }\n\t          });\n\t        })();\n\t      }\n\t\n\t      this.rows.splice(len).forEach(function (row) {\n\t        row.__templateUninitialize();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'itemForElement',\n\t    value: function itemForElement(element) {\n\t      while (element && !element.__repeatModel) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__repeatModel.get(this.as);\n\t    }\n\t  }, {\n\t    key: 'indexForElement',\n\t    value: function indexForElement(element) {\n\t      while (element && !element.__repeatModel) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__repeatModel.get(this.indexAs);\n\t    }\n\t  }, {\n\t    key: 'modelForElement',\n\t    value: function modelForElement(element) {\n\t      while (element && !element.__repeatModel) {\n\t        element = element.parentElement;\n\t      }\n\t      return element.__repeatModel;\n\t    }\n\t  }, {\n\t    key: '_filterChanged',\n\t    value: function _filterChanged(filter) {\n\t      if (typeof filter !== 'function') {\n\t        return;\n\t      }\n\t\n\t      this._itemsChanged(this.items);\n\t    }\n\t  }, {\n\t    key: 'props',\n\t    get: function get() {\n\t      return {\n\t        items: {\n\t          type: Array,\n\t          observer: '_itemsChanged'\n\t        },\n\t\n\t        as: {\n\t          type: String,\n\t          value: 'item'\n\t        },\n\t\n\t        indexAs: {\n\t          type: String,\n\t          value: 'index'\n\t        },\n\t\n\t        filter: {\n\t          type: Object,\n\t          observer: '_filterChanged'\n\t        }\n\t      };\n\t    }\n\t  }]);\n\t\n\t  return Repeat;\n\t}(xin.base('HTMLTemplateElement'));\n\t\n\txin.define('xin-repeat', Repeat, { extends: 'template' });\n\txin.Repeat = Repeat;\n\t\n\tmodule.exports = Repeat;\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** components/repeat.min.js\n **/","/* globals Node */\n\nconst xin = require('../src');\nconst T = require('template-binding');\n\nconst FILTER_ALL = () => true;\n\nclass RepeatRow extends T {\n  constructor (repeat, item, index) {\n    super(repeat, repeat.__templateModel, repeat);\n\n    this.__repeat = repeat;\n    this.__repeatAs = repeat.as;\n    this.__repeatIndexAs = repeat.indexAs;\n\n    this.__templateChildNodes.forEach(node => {\n      if (node.nodeType === Node.ELEMENT_NODE) {\n        node.__repeatModel = this;\n      }\n    });\n\n    this.update(item, index);\n\n    this.render();\n  }\n\n  update (item, index) {\n    this[this.__repeatAs] = item;\n    this[this.__repeatIndexAs] = index;\n    this.notify(this.__repeatAs, item);\n    this.notify(this.__repeatIndexAs, index);\n  }\n\n  set (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n      return super.set(path, value);\n    }\n\n    return this.__templateHost.set(path, value);\n  }\n\n  get (path) {\n    path = this.__templateGetPathAsArray(path);\n\n    if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n      return super.get(path);\n    }\n\n    return this.__templateHost.get(path);\n  }\n\n  notify (path, value) {\n    path = this.__templateGetPathAsArray(path);\n\n    if (path[0] === this.__repeatAs || path[0] === this.__repeatIndexAs) {\n      return super.notify(path, value);\n    }\n\n    return this.__templateHost.notify(path, value);\n  }\n};\n\nclass Repeat extends xin.base('HTMLTemplateElement') {\n  get props () {\n    return {\n      items: {\n        type: Array,\n        observer: '_itemsChanged',\n      },\n\n      as: {\n        type: String,\n        value: 'item',\n      },\n\n      indexAs: {\n        type: String,\n        value: 'index',\n      },\n\n      filter: {\n        type: Object,\n        observer: '_filterChanged',\n      },\n    };\n  }\n\n  __initTemplate () {\n    T.prototype.__templateInitialize.call(this, null, this);\n  }\n\n  _itemsChanged (items) {\n    this.rows = this.rows || [];\n\n    let len = 0;\n\n    if (items && items.length) {\n      let filter = this.filter || FILTER_ALL;\n      items.forEach((item, index) => {\n        if (filter(item)) {\n          if (this.rows[index]) {\n            this.rows[index].update(item, index);\n          } else {\n            this.rows.push(new RepeatRow(this, item, index));\n          }\n\n          len++;\n        }\n      });\n    }\n\n    this.rows.splice(len).forEach(row => {\n      row.__templateUninitialize();\n    });\n  }\n\n  itemForElement (element) {\n    while (element && !element.__repeatModel) {\n      element = element.parentElement;\n    }\n    return element.__repeatModel.get(this.as);\n  }\n\n  indexForElement (element) {\n    while (element && !element.__repeatModel) {\n      element = element.parentElement;\n    }\n    return element.__repeatModel.get(this.indexAs);\n  }\n\n  modelForElement (element) {\n    while (element && !element.__repeatModel) {\n      element = element.parentElement;\n    }\n    return element.__repeatModel;\n  }\n\n  _filterChanged (filter) {\n    if (typeof filter !== 'function') {\n      return;\n    }\n\n    this._itemsChanged(this.items);\n  }\n}\n\nxin.define('xin-repeat', Repeat, { extends: 'template' });\nxin.Repeat = Repeat;\n\nmodule.exports = Repeat;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/repeat.js\n **/"],"sourceRoot":""}