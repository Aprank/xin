{"version":3,"sources":["webpack:///./components/view.js","webpack:///./components/view.css?1673","webpack:///./components/view.css"],"names":["xin","require","setup","dom","Fx","SETUP","withDefault","transition","View","classList","add","remove","transitionFx","parentElement","__app","route","uri","focus","bind","fire","focusing","apply","arguments","focused","parameters","set","setFocus","children","forEach","element","setVisible","blurred","visible","querySelectorAll","el","type","String","required","value","blur","Component","define","module","exports"],"mappings":"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","file":"components/view.js","sourcesContent":["const xin = require('../');\nconst setup = require('../setup');\nconst dom = require('../dom');\nconst Fx = require('../fx');\n\nrequire('./view.css');\n\nconst SETUP = setup.withDefault('xin.View', {\n  transition: 'transition-slide',\n});\n\nclass View extends xin.Component {\n  get props () {\n    return {\n      uri: {\n        type: String,\n        required: true,\n      },\n      transition: {\n        type: String,\n        value: SETUP.transition,\n      },\n    };\n  }\n\n  get listeners () {\n    return {\n      focusing: '__focusing',\n      focus: '__focused',\n      blur: '__blurred',\n    };\n  }\n\n  created () {\n    this.classList.add('xin-view');\n  }\n\n  attached () {\n    this.classList.remove('xin-view--focus');\n    this.classList.remove('xin-view--visible');\n\n    this.transitionFx = new Fx(this);\n\n    if (this.parentElement.add) {\n      this.parentElement.add(this);\n    }\n\n    // deprecated in order of new uri parser\n    // this._parameterNames = (this.uri.match(/((\\(\\?)?:\\w+|\\*\\w+)/g) || []).map(function(param) {\n    //   return param.substr(1);\n    // });\n\n    this.__app.route(this.uri, this.focus.bind(this));\n    this.fire('routed');\n  }\n\n  __focusing () {\n    if (typeof this.focusing === 'function') {\n      return this.focusing.apply(this, arguments);\n    }\n  }\n\n  __focused () {\n    if (typeof this.focused === 'function') {\n      return this.focused.apply(this, arguments);\n    }\n  }\n\n  focus (parameters) {\n    this.set('parameters', parameters || {});\n\n    this.fire('focusing');\n\n    if (this.parentElement.setFocus) {\n      this.parentElement.setFocus(this);\n    } else {\n      dom(this.parentElement).children.forEach(element => {\n        if (element.setFocus) {\n          element.setFocus(false);\n          element.setVisible(false);\n        }\n      });\n\n      if (this.setFocus) {\n        this.setFocus(true);\n        this.setVisible(true);\n      }\n    }\n  }\n\n  __blurred () {\n    if (typeof this.blurred === 'function') {\n      return this.blurred.apply(this, arguments);\n    }\n  }\n\n  setVisible (visible) {\n    this.classList[visible ? 'add' : 'remove']('xin-view--visible');\n\n    this.fire(visible ? 'show' : 'hide');\n\n    if (!visible) {\n      dom(this).querySelectorAll('.xin-view-behavior.xin-view--visible').forEach(el => el.setVisible(visible));\n    }\n  }\n\n  setFocus (focus) {\n    this.classList[focus ? 'add' : 'remove']('xin-view--focus');\n\n    this.fire(focus ? 'focus' : 'blur');\n\n    if (!focus) {\n      dom(this).querySelectorAll('.xin-view-behavior.xin-view--focus').forEach(el => {\n        if (el.parentElement.setFocus) {\n          el.parentElement.setFocus(null);\n        } else {\n          el.setFocus(focus);\n        }\n      });\n    }\n  }\n}\n\nxin.define('xin-view', View);\nxin.View = View;\n\nmodule.exports = View;\n\n\n\n/** WEBPACK FOOTER **\n ** ./components/view.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./view.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./view.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./view.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./components/view.css\n ** module id = 27\n ** module chunks = 3\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".xin-view {\\n  box-sizing: border-box;\\n  display: none;\\n}\\n\\n.xin-view.xin-view--visible {\\n  display: block;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./components/view.css\n ** module id = 28\n ** module chunks = 3\n **/"],"sourceRoot":""}