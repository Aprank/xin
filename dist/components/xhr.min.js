webpackJsonp([3],{40:function(e,t,n){"use strict";var r=n(0);class s extends r.default.Component{get props(){return{auto:{type:Boolean,value:!1},method:{type:String,value:"get"},url:{type:String,observer:"_urlChanged"},as:{type:String,value:"intelligent",observer:"_asChanged"},debounceDuration:{type:Number,value:0},request:{type:Object,notify:!0},response:{type:Object,notify:!0},error:{type:Object,notify:!0}}}_urlChanged(){this.auto&&this.generateRequest()}_asChanged(){this.auto&&this.generateRequest()}_requestFlight(){let e=this.generateUrl();if(e)return this.req({method:this.method,url:e,as:this.as}).then(e=>{return this.fire("response",{xhr:e}),e.responseBody},e=>{throw this.fire("error",{error:e,xhr:e.xhr}),e})}generateRequest(){this.debounce("_requestFlight",this._requestFlight,this.debounceDuration)}generateUrl(){return this.url}__prepareOptions(e){return e=e||{},e.method=(e.method||"get").toUpperCase(),e}req(e){return e=this.__prepareOptions(e),new Promise((t,n)=>{let r=new window.XMLHttpRequest,s=()=>{this.set("response",r.responseBody),t(r)},o=e=>{this.set("error",e),n(e)};try{r.open(e.method,e.url,e.async||!0),r.onload=(()=>{var t=e.as;if("intelligent"===t){var n=r.getResponseHeader("Content-Type");t=n.indexOf("json")>=0?"json":n.indexOf("html")>=0?"html":n.indexOf("xml")>=0?"xml":"text"}if(r.status>=200&&r.status<400){switch(t){case"json":try{r.responseBody=JSON.parse(r.responseText)}catch(e){return o(e)}break;case"xml":r.responseBody=r.responseXML;break;default:r.responseBody=r.response}s()}else o(new Error("Http status "+r.status))}),r.onerror=o,r.send(e.body)}catch(e){o(e)}})}}r.default.define("xin-xhr",s),t.default=s}},[40]);